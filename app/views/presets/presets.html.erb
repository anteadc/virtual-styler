<div class="container">

  <% if @preset === nil  %>
    <h1>Bananas, nothing matched query</h1>
  <% else %>


  <legend class="style-legend"><span class="greyed-out">Pick a style </span><span class="greyed-in">> </span><span class="greyed-out">Pick a room</span> > Pick a Design</legend>

  <h2 class="pt-4">Pick your Favorite design</h2>

    <div class="row">
      <div class="col-12 col-lg-8 mb-3">
        <div class="preset-main-image-container">
          <%= cl_image_tag @preset.photo.key, class: "preset-main-image", :crop => "fill" %>
        </div>
      </div>
      <div class="col-12 col-lg-4">
        <form id="preset-form"
              action="/basket"
              method="GET"
              data-controller="count-item"
              >
          <div>
            <div data-controller="total-price">
              <div class="preset-items pe-2">
                <% @preset.items.each do | item | %>
                  <div class="d-flex item-card align-items-center mb-2">
                    <%= cl_image_tag item.photo.key, :width=>80,:height=>80, :crop=>"fill", class: "item-image p-2" %>
                    <p class="mt-3 me-5 ps-2"><span class="item-name"><%= item.name %></span>
                      <br>
                      <span class="item-description"><%= item.description %></span>
                    </p>
                    <div class="cart-input ms-auto me-5 mb-3 d-flex flex-column">
                      <div class="d-flex ">
                        <button class="minus" type="button" data-action="click->count-item#minus click->total-price#update" >-</button>
                        <input type="text" value="0" class="cart-input" name="<%= item.id %>" data-count-item-target="input" data-total-price-target="input">
                        <button class="plus" type="button" data-action="click->count-item#add click->total-price#update">+</button>
                      </div>
                      <p class="item-price">$ <span data-total-price-target="unitprice"><%= item.price%></span></p>
                    </div>
                  </div>
                  <% end %>
                </div>
              <div class="total">Your total is : $ <span data-total-price-target="total">0</span></div>
            </div>
          </div>
              <input type="submit" value="Submit">
        </form>
      </div>
    </div>
  <% end %>
</div>
